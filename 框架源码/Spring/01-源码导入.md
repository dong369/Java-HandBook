# 1. 概念理解

## 1.1 Spring是什么

### 1.1.1 官方描述

> The Spring Framework provides a comprehensive programming and configuration model for modern Java-based enterprise applications - on any kind of deployment platform.

> A key element of Spring is infrastructural support at the application level: Spring focuses on the "plumbing" of enterprise applications so that teams can focus on application-level business logic, without unnecessary ties to specific deployment environments.

### 1.1.2 个人理解



## 1.2 Spring有什么用



## 1.3 Spring解决什么问题

为了解决企业级应用开发的业务逻辑与其他各层的耦合问题。

## 1.4 Spring如何解耦



# 2. 项目源码

## 2.1 版本选择

GA=General Availability,正式发布的版本，官方推荐使用此版本。在国外都是用GA来说明release版本的。一般可用性（发布）; 应该非常稳定，功能齐全，一般可用性”版本 - 最终版本。

PRE= 预览版,内部测试版. 主要是给开发人员和测试人员测试和找BUG用的，不建议使用；

SNAPSHOT=快照版，可以稳定使用，且仍在继续改进版本。

RC=候选发布者; 可能功能完整，应该非常稳定 - 问题应该是相对罕见和次要的，但值得报告，试图修复它们以便发布。RCx 对于候选发布者，按顺序编号。

M=里程碑构建 - 可能不完整; 应该是模糊的稳定（即它不仅仅是一个夜间快照），但可能仍然有问题。Mx 对于里程碑版本，按顺序编号。

SR=服务版本（主要版本之后的后续维护版本-RELEASE）。

[Spring官网地址](<https://spring.io/>)，本文中下载使用的版本：spring-framework-5.1.10.RELEASE，同时如果为了方便起见，你可以直接到[本人的GitHub](https://github.com/s121528/spring-framework-5.1.x.git)地址下载包含有测试demo和源码阅读过程的注释项目！spring是在Linux下进行开发和编译的！

本篇文章使用的版本是：***spring-framework-5.1.10.RELEASE***，本文书写认为读者都已经配置好需要的基础工具。

## 2.2 基础工具

系统：WINDOWS 10

JDK版本：1.8.0_161

Maven版本：3.6.1

Gradle版本：5.5

IntelliJ IDEA版本：IntelliJ IDEA 2019.2.3

# 3. 源码编译

## 3.1 编译方式一

> 可以参考下载源码中的import-into-*.md文件的步骤进行操作！通过Windows命令窗口编译源码！

1. 进入源码目录：gradlew :spring-oxm:compileTestJava（必须的，由于国情原因可以能会失败，多试几次），如果下载的是本人的项目，此步骤可以省略，直接进行下面导入操作即可！

![预编译源码](D:\dev\2019dev\code\idea-workspace\Java-HandBook\插图\服务源码\Spring源码编译.png)

2. gradlew build -x test（非必须，无需执行）

3. gradle objenesisRepackJar、gradle cglibRepackJar（非必须）

4. 进行源码导入

   ![导入源码](D:\dev\2019dev\code\idea-workspace\Java-HandBook\插图\Spring源码\项目导入.png)

5. 右键项目选择 Load/Unload modules，排除spring-aspects项目。

![img](file://D:/dev/2019dev/code/idea-workspace/Java-HandBook/%E6%8F%92%E5%9B%BE/Spring%E6%BA%90%E7%A0%81/%E6%8E%92%E9%99%A4spring-aspects%E9%A1%B9%E7%9B%AE.png?lastModify=1565844829)



## 3.2 编译方式二

> 通过idea进行源码的编译

1. 导入源码。

![导入源码](D:\dev\2019dev\code\idea-workspace\Java-HandBook\插图\Spring源码\项目导入.png)

-XX: MaxPermSize= 2048m -Xmx2048m-XX: MaxHeapSize=2048m

2. 修改gradle/docs.gradle下面的文件

   注释dokka、asciidoctor两段配置（文档编译和编码编译），然后替换下面本地路径的配置！

   ```properties
   task schemaZip(type: Zip) {
       group = "Distribution"
       baseName = "spring-framework"
       classifier = "schema"
       description = "Builds -${classifier} archive containing all " +
               "XSDs for deployment at http://springframework.org/schema."
       duplicatesStrategy 'exclude'
       moduleProjects.each { subproject ->
           def Properties schemas = new Properties();
   
           subproject.sourceSets.main.resources.find {
               //这的路径需要改为\\
               it.path.endsWith("META-INF\\spring.schemas")
           }?.withInputStream { schemas.load(it) }
   
           for (def key : schemas.keySet()) {
               def shortName = key.replaceAll(/http.*schema.(.*).spring-.*/, '$1')
               assert shortName != key
               File xsdFile = subproject.sourceSets.main.resources.find {
                   //这里需要进行路径替换
                   it.path.endsWith(schemas.get(key).replaceAll('\\/', '\\\\'))
               }
               assert xsdFile != null
               into(shortName) {
                   from xsdFile.path
               }
           }
       }
   }
   ```

3. 项目预编译结构。     

![](D:\dev\2019dev\code\idea-workspace\Java-HandBook\插图\服务源码\进行预编译处理.png)

4. 项目整体编译。

![](D:\dev\2019dev\code\idea-workspace\Java-HandBook\插图\服务源码\IDEA中最终编译.png)

![](D:\dev\2019dev\code\idea-workspace\Java-HandBook\插图\服务源码\最终编译成功.png)

# 4. 体系结构

![体系结构](D:\dev\2019dev\code\idea-workspace\Java-HandBook\插图\Spring源码\体系结构.png)

## 4.1 核心容器

 Spring的核心容器(Core Container)是其他模块建立的基础。

 Spring-core：提供框架的基本组成部分，包括 控制反转(IoC)和依赖注入(DI) 功能。

 Spring-beans：提供BeanFactory，由工厂模式实现，Spring将代理对象称为Bean。

 Spring-context：建立在core和beans基础上，提供框架式的访问方式。

 Spring-SpEL：表达式语言Spring Expression Language（简称 SpEL ）,支持运行时查询和操作对象图的表达式。

## 4.2 数据访问

 Spring-jdbc：提供JDBC抽象层，消除编码和特有的数据库错误解析。

 Spring-orm：为对象关系映射API提供集成层。

 Spring-oxm：提供支持对象/xml映射的抽象层实现。

 Spring-jms：Java消息传递服务。

 Spring-tx：事务，实现特殊接口和普通Java对象类的编程和声明式事务管理。

## 4.3 Web模块

 Spring-web：提供web开发基本的集成功能。

 Spring-webmvc：即Web-Servlet，包含用于web应用的SpringMVC和REST Web Servies实现。

 Spring-websocket：提供WebSocket和SockJS实现。

 Portlet：类似于Servlet模块的功能。

## 4.4 测试模块

spring-test：支持用JUnit和Spring组件进行单元测试和集成测试。

## 4.5 其他模块

 Spring-aop：提供符合AOP要求的面向切面的编程实现。

 Spring-aspects：提供与AspectJ的集成功能。

 Spring-Instrument：提供类植入和类加载器的实现。

 Spring-messaging：提供对消息传递体系结构和协议的支持。

# 5. Hello World

## 5.1 添加Maven模块







## 5.2 添加Gradle模块







# 总结