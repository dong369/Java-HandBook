## 1.什么是Restful,如何定义Restful接口

具体可以看论文,这里通俗的讲一下.

简单来说是以下两种:

1.通过提交的方式和资源.来确定你要执行的功能

2.通过返回的状态码来确定执行成功还是失败



>查询 GET

>新增 POST

>修改 PUT

>删除 DELETE



好处:全自动生成文档.更加直观



## 2.RestTemplate的使用



### 2.1 getForObject时,路径做为参数



服务器端

```java

	@GetMapping("/getByUsername/{username}")

	public User getByUsername(@PathVariable("username") String username) {

		User byUsername = userService.getByUsername(username);

		return byUsername;

	}

```



客户端

```java

	RestTemplate restTemplate = new RestTemplate();

		User forObject = restTemplate.getForObject("http://localhost:8080/user/getByUsername/{username}", User.class, "makai1" );

		System.out.println(forObject.getPassword());

```





### 2.2 form表单参数

>application/x-www-form-urlencoded

>我们最常用的



服务器端

```java

	@PostMapping("/userAdd")

	public UserVo userAdd( UserVo vo) {

		userService.add(vo);

		return vo;

	}

```



客户端

```java

		RestTemplate restTemplate = new RestTemplate();

		MultiValueMap <String,String> map = new LinkedMultiValueMap <String,String>();

		map.add("username", "killer");

		map.add("password", "fucker");

		UserVo forObject = restTemplate.postForObject("http://localhost:8080/user/userAdd", map, UserVo.class);

		System.out.println(forObject);

```



### 2.3JSON参数

>application/json

>rest最常用的





服务器端

```java

	@PostMapping("/userAdd")

	public UserVo userAdd(@RequestBody UserVo vo) {

		userService.add(vo);

		return vo;

	}

```



客户端

```java

		RestTemplate restTemplate = new RestTemplate();

		User u = new User();

        u.setUsername("zhangsan");

		UserVo forObject = restTemplate.postForObject("http://localhost:8080/user/userAdd", u, UserVo.class);

		System.out.println(forObject.getId());

```









## 3.最佳实践

### 3.1常用的web请求,我一共分为五小类,四大类(当然还有别的,常用的就四种 )

大类是:增 删 改 查

小类是:增,删 改 查单个对象 单询集合分页



### 3.2 新增(对应Post)

通常来说,新增是给一个URL提交一个JSON对象,服务器拿到对象后,进行效验,保存

服务器端

```java

	/**

	 * 添加

	 * @param vo

	 * @return

	 */

	@PostMapping("/add")

	public UserVo add(@RequestBody UserVo vo) {

		UserVo vo1 = userService.add(vo);

		return vo1;

	}

```

客户端

```java

	String url = "http://localhost:8080/user/add";

    UserVo vo = new UserVo();

    vo.setUsername("makai0");

    vo.setPassword("0");

    UserVo postForObject = restTemplate.postForObject(url, vo, UserVo.class);

    System.out.println(JSON.toJSONString(postForObject));

```



### 3.3 修改(对应PUT)

修改一般是URL中包含你要修改的ID,实体中带有修改的信息.

服务器端

```java

	/**

	 * 修改

	 * @param vo

	 * @return

	 */

	@PutMapping("/update/{id}")

	public Json update(@PathVariable("id") UUID id, @RequestBody UserVo vo) {

		vo.setId(id);

		userService.update(vo);

		return new Json(true, null, null);

	}

```



客户端

```java

	String url = "http://localhost:8080/user/update/{id}";

    UserVo u = new UserVo();

    u.setUsername("makai01");

    u.setPassword("01");

	//此方法是我扩展RestTemplate的方法

    Json putForObject = restTemplate.putForObject(url, u, Json.class, "8c8cc4c5-b0af-4f80-bfde-de165a6ffb53");

    System.out.println(JSON.toJSONString(putForObject));

```



### 3.4 删除(DELETE)



服务器端:

```java

	/**

	 * 删除

	 * @param id

	 * @return

	 */

	@DeleteMapping("/delete/{id}")

	public Json deleteByUsername(@PathVariable("id") UUID id) {

		userService.delete(id);

		return new Json(true, null, null);

	}

```



客户端:

```java

	String url = "http://localhost:8080/user/delete/{id}";

    restTemplate.delete(url, "36bb918a-03f1-47b9-84da-e28a9f75effa");

```



### 3.5 查询一个对象(GET)

服务器端

```java

	/**

	 * 查询一个

	 * @param id

	 * @return

	 */

	@GetMapping("/user/{id}")

	public UserVo user(@PathVariable("id") UUID id){

		return userService.getById(id);

	}

```



客户端

```java

	String url = "http://localhost:8080/user/user/{id}";

    UserVo vo = restTemplate.getForObject(url, UserVo.class, "36bb918a-03f1-47b9-84da-e28a9f75effa");

    System.out.println(JSON.toJSONString(vo));

```



### 3.6 查询一个集合(分页)

服务器端

```java

	/**

	 * 查询列表,带分页,条件查询

	 * @param vo

	 * @param ph

	 * @return

	 */

	@GetMapping("/users")

	public JsonList users(UserVo vo, PageHelper ph){

		return userService.users(vo, ph);

	}

	

```



客户端

```java

	String url = "http://localhost:8080/user/users";



    UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(url).queryParam("page", 1).queryParam("rows", 2);



    JsonList forObject = restTemplate.getForObject(builder.build().encode().toUri(), JsonList.class);

    System.out.println(JSON.toJSONString(forObject));

```









