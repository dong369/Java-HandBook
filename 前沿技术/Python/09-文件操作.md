# 1 理论基础

## 1.1 概念和作用

计算机的文件就是存储在某种**长期存储设备**上的一段数据，长期存储设备包括：硬盘、U盘、移动光盘、光盘...等

文件的作用是将数据长期保存下来，在需要的时候进行使用。

## 1.2 文件存储形式

在计算机中，文件是以**二进制**的方式保存在存储设备上的。

## 1.3 文本文件

可以使用 **文本编辑软件** 查看

本质上还是二进制文件

例如：python的源程序

## 1.4 二进制文件

保存的内容不是给人直接阅读的，而是**提供给其他软件使用的**

例如：图片文件、音频文件、视频文件等等

二进制文件不能使用**文本编辑软件**查看

# 2 文件操作

## 2.1 操作文件套路

在计算机中操作文件的套路是非常固定的，一个包含三个步骤：

1、打开文件

2、修改文件（读、写）

3、关闭文件

## 2.2 操作文件方法

在Python中要操作文件需要记住1个函数和3个方法

| 序号 | 函数、方法 | 说明                         |
| ---- | ---------- | ---------------------------- |
| 01   | open       | 打开文件，并返回文件操作对象 |
| 02   | read       | 将文件内容读取到内存         |
| 03   | write      | 将指定内容写入文件           |
| 04   | close      | 关闭文件                     |

open函数负责打开文件，并且返回文件对象

read/write/close三个方法都需要通过**文件对象**来调用

## 2.3 读文件

open函数的第一个参数就是要打开的文件名，文件名称区分大小写的，如果文件不存在会抛出异常。

read方法可以一次性的读入并返回所以内容。方法执行完毕后会把**文件指针**移动到文件的末尾。

close方法负责关闭文件操作。如果忘记关闭文件，会造成系统**资源的消耗**，而且会**影响后续文件**的访问。

在开发中，通常会先编写**打开**和 **关闭**的代码，再编写中间针对文件的**读/写**操作！

```python
# 1. 打开 - 文件名需要注意大小写
file = open("README")

# 2. 读取
text = file.read()
print(text)

# 3. 关闭
file.close()
```

## 2.4 文件指针

文件指针标记从哪里开始读取数据。

第一次打开文件时，通常文件指针是指向文件的开始位置，当执行了read方法后，文件指针会指向文件的末尾。

## 2.5 打开文件方式



| 访问方式 | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| r        | 以**只读**方式打开文件。文件的指针将会放在文件的开头，这是**默认模式**。如果文件不存在，抛出异常 |
| w        | 以**只写**方式打开文件。如果文件存在会被覆盖。如果文件不存在，创建新文件 |
| a        | 以**追加**方式打开文件。如果该文件已存在，文件指针将会放在文件的结尾。如果文件不存在，创建新文件进行写入 |
| r+       | 以**读写**方式打开文件。文件的指针将会放在文件的开头。如果文件不存在，抛出异常 |
| w+       | 以**读写**方式打开文件。如果文件存在会被覆盖。如果文件不存在，创建新文件 |
| a+       | 以**读写**方式打开文件。如果该文件已存在，文件指针将会放在文件的结尾。如果文件不存在，创建新文件进行写入 |



## 2.6 行读取文件



## 2.7 文件复制

```python
# 1. 打开文件
file_read = open("README")
file_write = open("README[复件]", "w")

# 2. 读取并写入文件
text = file_read.read()
file_write.write(text)

# 3. 关闭文件
file_read.close()
file_write.close()
```





```python
# 1. 打开文件
file_read = open("README")
file_write = open("README[复件]", "w")

# 2. 读取并写入文件
while True:
    # 每次读取一行
    text = file_read.readline()

    # 判断是否读取到内容
    if not text:
        break

    file_write.write(text)

# 3. 关闭文件
file_read.close()
file_write.close()
```



## 2.8 文件/目录

1、文件操作

| 序号 | 方法名 | 说明       | 示例                            |
| ---- | ------ | ---------- | ------------------------------- |
| 01   | rename | 重命名文件 | os.rename(源文件名, 目标文件名) |
| 02   | remove | 删除文件   | os.remove(文件名)               |

2、目录操作

| 序号 | 方法名     | 说明           | 示例                 |
| ---- | ---------- | -------------- | -------------------- |
| 01   | listdir    | 目录列表       | os.listdir(目录名)   |
| 02   | mkdir      | 创建目录       | os.mkdir(目录名)     |
| 03   | rmdir      | 删除目录       | os.rmdir(目录名)     |
| 04   | getcwd     | 获取当前目录   | os.getcwd()          |
| 05   | chdir      | 修改工作目录   | os.chdir(目标目录)   |
| 06   | path.isdir | 判断是否是文件 | path.isdir(文件路径) |

# 3 文件编码

文本文件存储的内容是基于**字符编码**的文件，常见的编码有`ASCII`编码，`UNICODE`编码等

## 3.1 ASCII

计算机中一共有256个ASCII字符，一个ASCII字符在内存中占一个字节的空间。

## 3.2 Unicode

计算机中使用**1~6 个字节**来表示一个`UTF-8` 字符，涵盖了**地球上几乎所有地区的文字**，大多数汉字会使用三个字节表示，utf8是Unicode编码的一种格式。

## 3.3 Python中文

*Python 2.x 默认使用* `ASCII` *编码格式*

*Python 3.x 默认使用* `UTF-8` *编码格式*

在Python2.x文件的**第一行** 增加以下代码，解释器会以`utf-8` 编码来处理python文件

```python
# *-* coding:utf8 *-*
```

也可以使用

```python
# coding=utf8
```

在`Python 2.x`中，即使指定了文件使用UTF-8的编码格式，但是在遍历字符串时，仍然**以字节为单位遍历**字符串，要能够**正确的遍历字符串**，在定义字符串时，需要**在字符串的引号前**，增加一个小写字母 `u`，告诉解释器这是一个`unicode` 字符串（使用 `UTF-8` 编码格式的字符串）

```python
# *-* coding:utf8 *-*

# 在字符串前，增加一个 `u` 表示这个字符串是一个 utf8 字符串
hello_str = u"你好世界"

print(hello_str)

for c in hello_str:
    print(c)
```

