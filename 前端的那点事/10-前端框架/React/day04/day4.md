# ç§»åŠ¨Appç¬¬4å¤©


## ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ
 + æ¦‚å¿µï¼šåœ¨ç»„ä»¶åˆ›å»ºã€åˆ°åŠ è½½åˆ°é¡µé¢ä¸Šè¿è¡Œã€ä»¥åŠç»„ä»¶è¢«é”€æ¯çš„è¿‡ç¨‹ä¸­ï¼Œæ€»æ˜¯ä¼´éšç€å„ç§å„æ ·çš„äº‹ä»¶ï¼Œè¿™äº›åœ¨ç»„ä»¶ç‰¹å®šæ—¶æœŸï¼Œè§¦å‘çš„äº‹ä»¶ï¼Œç»Ÿç§°ä¸º ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼›
 + ç»„ä»¶ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š
   - **ç»„ä»¶åˆ›å»ºé˜¶æ®µ**ï¼šç»„ä»¶åˆ›å»ºé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼šåˆ›å»ºé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåœ¨ç»„ä»¶çš„ä¸€è¾ˆå­ä¸­ï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼›
	> componentWillMount: ç»„ä»¶å°†è¦è¢«æŒ‚è½½ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹æ¸²æŸ“è™šæ‹ŸDOM
	> renderï¼šç¬¬ä¸€æ¬¡å¼€å§‹æ¸²æŸ“çœŸæ­£çš„è™šæ‹ŸDOMï¼Œå½“renderæ‰§è¡Œå®Œï¼Œå†…å­˜ä¸­å°±æœ‰äº†å®Œæ•´çš„è™šæ‹ŸDOMäº†
	> componentDidMount: ç»„ä»¶å®Œæˆäº†æŒ‚è½½ï¼Œæ­¤æ—¶ï¼Œç»„ä»¶å·²ç»æ˜¾ç¤ºåˆ°äº†é¡µé¢ä¸Šï¼Œå½“è¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œï¼Œç»„ä»¶å°±è¿›å…¥éƒ½äº† è¿è¡Œä¸­ çš„çŠ¶æ€

   - **ç»„ä»¶è¿è¡Œé˜¶æ®µ**ï¼šä¹Ÿæœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼Œæ ¹æ®ç»„ä»¶çš„stateå’Œpropsçš„æ”¹å˜ï¼Œæœ‰é€‰æ‹©æ€§çš„è§¦å‘0æ¬¡æˆ–å¤šæ¬¡ï¼›
   > componentWillReceiveProps: ç»„ä»¶å°†è¦æ¥æ”¶æ–°å±æ€§ï¼Œæ­¤æ—¶ï¼Œåªè¦è¿™ä¸ªæ–¹æ³•è¢«è§¦å‘ï¼Œå°±è¯æ˜çˆ¶ç»„ä»¶ä¸ºå½“å‰å­ç»„ä»¶ä¼ é€’äº†æ–°çš„å±æ€§å€¼ï¼›
   > shouldComponentUpdate: ç»„ä»¶æ˜¯å¦éœ€è¦è¢«æ›´æ–°ï¼Œæ­¤æ—¶ï¼Œç»„ä»¶å°šæœªè¢«æ›´æ–°ï¼Œä½†æ˜¯ï¼Œstate å’Œ props è‚¯å®šæ˜¯æœ€æ–°çš„
   > componentWillUpdate: ç»„ä»¶å°†è¦è¢«æ›´æ–°ï¼Œæ­¤æ—¶ï¼Œå°šæœªå¼€å§‹æ›´æ–°ï¼Œå†…å­˜ä¸­çš„è™šæ‹ŸDOMæ ‘è¿˜æ˜¯æ—§çš„
   > render: æ­¤æ—¶ï¼Œåˆè¦é‡æ–°æ ¹æ®æœ€æ–°çš„ state å’Œ props é‡æ–°æ¸²æŸ“ä¸€æ£µå†…å­˜ä¸­çš„ è™šæ‹ŸDOMæ ‘ï¼Œå½“ render è°ƒç”¨å®Œæ¯•ï¼Œå†…å­˜ä¸­çš„æ—§DOMæ ‘ï¼Œå·²ç»è¢«æ–°DOMæ ‘æ›¿æ¢äº†ï¼æ­¤æ—¶é¡µé¢è¿˜æ˜¯æ—§çš„
   > componentDidUpdate: æ­¤æ—¶ï¼Œé¡µé¢åˆè¢«é‡æ–°æ¸²æŸ“äº†ï¼Œstate å’Œ è™šæ‹ŸDOM å’Œ é¡µé¢å·²ç»å®Œå…¨ä¿æŒåŒæ­¥

   - **ç»„ä»¶é”€æ¯é˜¶æ®µ**ï¼šä¹Ÿæœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼Œä¸€è¾ˆå­åªæ‰§è¡Œä¸€æ¬¡ï¼›
   > componentWillUnmount: ç»„ä»¶å°†è¦è¢«å¸è½½ï¼Œæ­¤æ—¶ç»„ä»¶è¿˜å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼›

[vueä¸­çš„ç”Ÿå‘½å‘¨æœŸå›¾](https://cn.vuejs.org/v2/guide/instance.html#ç”Ÿå‘½å‘¨æœŸå›¾ç¤º)
[React Native ä¸­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ](http://www.race604.com/react-native-component-lifecycle/)


![Reactä¸­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ](./images/Reactä¸­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ.png)

### defaultProps
> åœ¨ç»„ä»¶åˆ›å»ºä¹‹å‰ï¼Œä¼šå…ˆåˆå§‹åŒ–é»˜è®¤çš„propså±æ€§ï¼Œè¿™æ˜¯å…¨å±€è°ƒç”¨ä¸€æ¬¡ï¼Œä¸¥æ ¼åœ°æ¥è¯´ï¼Œè¿™ä¸æ˜¯ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸçš„ä¸€éƒ¨åˆ†ã€‚åœ¨ç»„ä»¶è¢«åˆ›å»ºå¹¶åŠ è½½å€™ï¼Œé¦–å…ˆè°ƒç”¨ constructor æ„é€ å™¨ä¸­çš„ this.state = {}ï¼Œæ¥åˆå§‹åŒ–ç»„ä»¶çš„çŠ¶æ€ã€‚

Reactç”Ÿå‘½å‘¨æœŸçš„å›è°ƒå‡½æ•°æ€»ç»“æˆè¡¨æ ¼å¦‚ä¸‹ï¼š
![Reactç”Ÿå‘½å‘¨æœŸè¡¨æ ¼](./images/Reactç”Ÿå‘½å‘¨æœŸè¡¨æ ¼.png)
ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œé¡ºåºï¼š
+ Mountingï¼š
 - constructor()
 - componentWillMount()
 - render()
 - componentDidMount()
+ Updatingï¼š
 - componentWillReceiveProps(nextProps)
 - shouldComponentUpdate(nextProps, nextState)
 - componentWillUpdate(nextProps, nextState)
 - render()
 - componentDidUpdate(prevProps, prevState)
+ Unmountingï¼š
 - componentWillUnmount()

## é€šè¿‡Counterè®¡æ•°å™¨çš„å°æ¡ˆä¾‹ - äº†è§£ç”Ÿå‘½å‘¨æœŸå‡½æ•°
1. ç»™ç»„ä»¶è®¾ç½®é»˜è®¤å±æ€§ï¼š
2. ç»™å±æ€§è¿›è¡Œç±»å‹æ ¡éªŒï¼Œéœ€è¦å…ˆè¿è¡Œ`cnpm i prop-types --save`


## ç»„ä»¶åˆå§‹åŒ–æ—¶ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æ€»ç»“
1. componentWillMountï¼š
2. renderï¼š
3. componentDidMountï¼š
4. æ³¨æ„ï¼šåœ¨renderå‡½æ•°ä¸­ï¼Œä¸èƒ½è°ƒç”¨`setState()`æ–¹æ³•

## é€šè¿‡åŸç”Ÿçš„æ–¹å¼è·å–å…ƒç´ å¹¶ç»‘å®šäº‹ä»¶


## Reactä¸­ä½¿ç”¨refå±æ€§è·å–DOMå…ƒç´ å¼•ç”¨


## ä½¿ç”¨Reactä¸­çš„äº‹ä»¶ï¼Œç»‘å®šcountè‡ªå¢


## ç»„ä»¶è¿è¡Œä¸­äº‹ä»¶çš„å¯¹æ¯”
1. shouldComponentUpdateï¼š
2. componentWillUpdateï¼š
3. renderï¼š
4. componentDidUpdateï¼š


## ç»‘å®šthiså¹¶ä¼ å‚çš„ä¸‰ç§æ–¹å¼
1. åœ¨äº‹ä»¶ä¸­ç»‘å®šthiså¹¶ä¼ å‚ï¼š
```
    <input type="button" value="åœ¨äº‹ä»¶ä¸­ç»‘å®šthiså¹¶ä¼ å‚" onClick={this.handleMsg1.bind(this, 'ğŸ•', 'ğŸŸ')} />

    // åœ¨äº‹ä»¶ä¸­ç»‘å®šthiså¹¶ä¼ å‚
    handleMsg1(arg1, arg2) {
        console.log(this);
        // æ­¤æ—¶thisæ˜¯ä¸ªnull
        this.setState({
            msg: 'åœ¨äº‹ä»¶ä¸­ç»‘å®šthiså¹¶ä¼ å‚ï¼š' + arg1 + arg2
        });
    }
```
2. åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šthiså¹¶ä¼ å‚:
```
    // ä¿®æ”¹æ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼š
    this.handleMsg2 = this.handleMsg2.bind(this, 'ğŸš—', 'ğŸšš');

    <input type="button" value="åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šthiså¹¶ä¼ å‚" onClick={this.handleMsg2} />

    // åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šthiså¹¶ä¼ å‚
    handleMsg2(arg1, arg2) {
        this.setState({
            msg: 'åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šthiså¹¶ä¼ å‚ï¼š' + arg1 + arg2
        });
    }
```
3. ç”¨ç®­å¤´å‡½æ•°ç»‘å®šthiså¹¶ä¼ å‚ï¼š
```
    <input type="button" value="ç”¨ç®­å¤´å‡½æ•°ç»‘å®šthiså¹¶ä¼ å‚" onClick={() => { this.handleMsg3('ğŸ‘©', 'ğŸ‘°') }} />

    // ç”¨ç®­å¤´å‡½æ•°ç»‘å®šthiså¹¶ä¼ å‚
        handleMsg3(arg1, arg2) {
            this.setState({
                msg: 'ç”¨ç®­å¤´å‡½æ•°ç»‘å®šthiså¹¶ä¼ å‚ï¼š' + arg1 + arg2
            });
        }
```

## ç»‘å®šæ–‡æœ¬æ¡†ä¸stateä¸­çš„å€¼
1. åœ¨Vue.jsä¸­ï¼Œé»˜è®¤å¯ä»¥é€šè¿‡`v-model`æŒ‡ä»¤ï¼Œå°†è¡¨å•æ§ä»¶å’Œæˆ‘ä»¬çš„`data`ä¸Šé¢çš„å±æ€§è¿›è¡ŒåŒå‘æ•°æ®ç»‘å®šï¼Œæ•°æ®å˜åŒ–å’Œé¡µé¢ä¹‹é—´çš„å˜åŒ–æ˜¯åŒæ­¥çš„ï¼
2. åœ¨React.jsä¸­ï¼Œé»˜è®¤æ²¡æœ‰æä¾›åŒå‘æ•°æ®ç»‘å®šè¿™ä¸€åŠŸèƒ½ï¼Œé»˜è®¤çš„ï¼Œåªèƒ½æŠŠ`state`ä¹‹ä¸Šçš„æ•°æ®åŒæ­¥åˆ°ç•Œé¢çš„æ§ä»¶ä¸Šï¼Œä½†æ˜¯ä¸èƒ½é»˜è®¤å®ç°æŠŠç•Œé¢ä¸Šæ•°æ®çš„æ”¹å˜ï¼ŒåŒæ­¥åˆ°`state`ä¹‹ä¸Šï¼Œéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨è°ƒç”¨ç›¸å…³çš„äº‹ä»¶ï¼Œæ¥è¿›è¡Œé€†å‘çš„æ•°æ®ä¼ è¾“ï¼
3. ç»‘å®šæ–‡æœ¬æ¡†å’Œstateçš„å€¼ï¼š
```
    {/*åªè¦å°†valueå±æ€§ï¼Œå’Œstateä¸Šçš„çŠ¶æ€è¿›è¡Œç»‘å®šï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªè¡¨å•å…ƒç´ å°±å˜æˆäº†å—æ§è¡¨å•å…ƒç´ ï¼Œè¿™æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰è°ƒç”¨ç›¸å…³çš„äº‹ä»¶ï¼Œæ˜¯æ— æ³•æ‰‹åŠ¨ä¿®æ”¹è¡¨å•å…ƒç´ ä¸­çš„å€¼çš„*/}
    <input style={{ width: '100%' }} ref="txt" type="text" value={this.state.msg} onChange={this.handleTextChange} />

    // è¿™æ˜¯æ–‡æœ¬æ¡†å†…å®¹æ”¹å˜æ—¶å€™çš„å¤„ç†å‡½æ•°
    handleTextChange = () => {
        this.setState({
            msg: this.refs.txt.value
        });
    }
```
4. æ³¨æ„`setStateçš„ä¸€ä¸ªé—®é¢˜`ï¼š
```
// ä¿å­˜æœ€æ–°çš„stateçŠ¶æ€å€¼ï¼Œåœ¨ä¿å­˜çš„æ—¶å€™ï¼Œæ˜¯å¼‚æ­¥åœ°è¿›è¡Œä¿å­˜çš„ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæƒ³è¦è·å–æœ€æ–°çš„ï¼Œåˆšåˆšä¿å­˜çš„é‚£ä¸ªçŠ¶æ€ï¼Œéœ€è¦é€šè¿‡å›æ‰å‡½æ•°çš„å½¢å¼å»è·å–æœ€æ–°state
this.setState({
    msg: this.refs.txt.value
    // msg: e.target.value
}, function () {
    // è·å–æœ€æ–°çš„stateçŠ¶æ€å€¼
    console.log(this.state.msg);
});
```


## å‘è¡¨è¯„è®ºæ¡ˆä¾‹


## æ‰©å±•
### contextç‰¹æ€§
è®°ä½ä¸€ä¸²å•è¯ç»„åˆ`getChildContextTypes`
å‰3ä¸ªã€å3ä¸ªã€åä¸¤ä¸ª
ä¸€ä¸ªæ–¹æ³•ã€ä¸¤ä¸ªé™æ€å±æ€§



## ç›¸å…³æ–‡ç« 
[ç±»å‹æ ¡éªŒ](https://facebook.github.io/react/docs/typechecking-with-proptypes.html)
[Animation Add-Ons](https://reactjs.org/docs/animation.html#high-level-api-reactcsstransitiongroup)